<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>You‚Äôve got mail üíå</title>

<style>
body{
  margin:0;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto;
  background:#0b0b10;
  color:#fff;
}
.wrap{max-width:760px;margin:0 auto;padding:18px;text-align:center}
.card{
  background:#141423;
  border:1px solid #2a2a44;
  border-radius:16px;
  padding:18px;
  box-shadow:0 12px 40px rgba(0,0,0,.35)
}
.hidden{display:none}
.big{font-size:26px}
.note{opacity:.85;font-size:14px}
.btn{
  padding:12px 16px;
  border-radius:12px;
  border:1px solid #3a3a66;
  background:#1d1d33;
  color:#fff;
  cursor:pointer
}
.btn:active{transform:scale(.97)}
.divider{height:1px;background:#2a2a44;margin:16px 0}

/* Envelope */
.envelope{font-size:120px;cursor:pointer}
.envelope.clicked{opacity:.8}

/* Game */
canvas{width:100%;max-width:520px;background:#0f0f1a;border-radius:14px;border:1px solid #2a2a44}
.hud{display:flex;justify-content:space-between;max-width:520px;margin:10px auto;gap:8px;flex-wrap:wrap}
.pill{font-size:12px;border:1px solid #2a2a44;padding:6px 10px;border-radius:999px}

/* Coin */
.coin{font-size:42px;cursor:pointer}
.coin.inserted{opacity:.3;transform:translateX(50px) scale(.5);transition:.5s}

/* Wheel */
.wheelBox{position:relative;width:300px;height:300px;margin:0 auto}
#wheel{width:300px;height:300px;border-radius:50%}
.pointer{
  position:absolute;top:-6px;left:50%;
  transform:translateX(-50%);
  width:0;height:0;
  border-left:14px solid transparent;
  border-right:14px solid transparent;
  border-bottom:22px solid #ff4d7d
}

/* Book */
.book{position:relative;width:420px;height:560px;margin:0 auto;border-radius:16px;overflow:hidden}
.book img{width:100%;height:100%;object-fit:cover}
.caption{
  position:absolute;top:10px;left:10px;right:10px;
  background:rgba(0,0,0,.4);
  padding:10px;border-radius:12px;font-size:14px
}

/* Bonus click */
.avatarBig{font-size:90px;cursor:pointer}

/* Final scene */
.finalScene{
  position:relative;
  height:600px;
  background:linear-gradient(#87cefa,#e0f7ff 60%,#7cd67c);
  overflow:hidden
}
.sun{position:absolute;top:30px;right:40px;width:80px;height:80px;border-radius:50%;background:#ffd84d}
.cloud{position:absolute;top:80px;width:120px;height:40px;background:#fff;border-radius:20px;opacity:.8;animation:cloud 30s linear infinite}
@keyframes cloud{from{left:-140px}to{left:100%}}

.char{
  position:absolute;bottom:80px;font-size:110px;
}
.label{
  position:absolute;top:-28px;left:50%;
  transform:translateX(-50%);
  font-size:14px;background:rgba(0,0,0,.5);
  padding:4px 8px;border-radius:10px
}

#sljy{left:20px;animation:walk 3s forwards}
@keyframes walk{to{left:220px}}

.kiss{
  position:absolute;font-size:40px;
  top:-50px;left:50%;
  transform:translateX(-50%);
  opacity:0;transition:.4s
}

/* Petals */
.petals{pointer-events:none;position:absolute;inset:0}
.petals span{
  position:absolute;top:-20px;
  width:12px;height:12px;
  background:#ffb7c5;
  border-radius:60% 40% 60% 40%;
  opacity:.9;
  animation:fall 6s linear infinite
}
@keyframes fall{
  to{transform:translateY(700px) rotate(360deg);opacity:.2}
}
</style>
</head>

<body>
<div class="wrap"><div class="card">

<!-- S1 -->
<section id="s1">
  <div class="big">Dear Mr Wong Duan Chiang,</div>
  <p class="note">Have you turned your audio on? Click on the envelope.</p>
  <div class="divider"></div>
  <div class="envelope" id="env">üíå</div>
</section>

<!-- S2 Game -->
<section id="s2" class="hidden">
  <div class="big">How OP are you? üéÆ</div>
  <p class="note">Reach 11 to win the game.</p>
  <div class="hud">
    <div class="pill">dcop</div>
    <div class="pill">Goal: 11</div>
    <div class="pill">Score: <span id="score">0</span></div>
  </div>
  <canvas id="game" width="520" height="360"></canvas>
  <div style="margin-top:10px">
    <button class="btn" id="start">Start</button>
  </div>
  <p class="note" id="gameMsg">Tap screen to jump.</p>
</section>

<!-- S3 Coin -->
<section id="s3" class="hidden">
  <div class="big">Damn, you‚Äôre an 11/10 indeed!</div>
  <p class="note">ü™ô Insert your coin</p>
  <div class="coin" id="coin">ü™ô</div>
</section>

<!-- S4 Wheel -->
<section id="s4" class="hidden">
  <div class="big">Spin to win üé°</div>
  <div class="wheelBox">
    <div class="pointer"></div>
    <canvas id="wheel" width="300" height="300"></canvas>
  </div>
  <button class="btn" id="spin">SPIN</button>
  <button class="btn hidden" id="wildBtn">Wild card? Hmmmm</button>
</section>

<!-- S5 Book -->
<section id="s5" class="hidden">
  <div class="book" id="book"></div>
  <button class="btn" id="bonusBtn" style="margin-top:12px">Bonus luck here!</button>
</section>

<!-- S6 Bonus Click -->
<section id="s6" class="hidden">
  <div class="big">Click on dcop to increase your luck stats!</div>
  <div class="avatarBig" id="dcopBonus">üßç‚Äç‚ôÇÔ∏è</div>
  <p class="note" id="bonusMsg"></p>
</section>

<!-- S7 Final -->
<section id="s7" class="hidden">
  <div class="finalScene">
    <div class="sun"></div>
    <div class="cloud" style="top:90px"></div>
    <div class="cloud" style="top:140px;animation-delay:8s"></div>

    <div class="char" id="dcop" style="left:300px">
      <div class="label">dcop</div>üßç‚Äç‚ôÇÔ∏è
    </div>

    <div class="char" id="sljy">
      <div class="label">sljy</div>üßç‚Äç‚ôÄÔ∏è
      <div class="kiss" id="kiss">üòò</div>
    </div>

    <div class="petals" id="petals"></div>
  </div>
  <div class="big" id="finalText">
    Congrats! You have increased your girlfriend‚Äôs luck stat to mosterest!
  </div>
</section>

</div></div>

<!-- Audio -->
<audio id="hmmmm" src="hmmmm.mp3"></audio>
<audio id="bgm" src="bgm.mp3" loop></audio>
<audio id="spinSfx" src="spin.mp3"></audio>
<audio id="yay" src="yay.mp3"></audio>
<audio id="happy" src="happy.mp3" loop></audio>
<audio id="kissAudio" src="kiss.mp3"></audio>
<audio id="loveAudio" src="love.mp3"></audio>

<script>
const show=id=>["s1","s2","s3","s4","s5","s6","s7"].forEach(s=>document.getElementById(s).classList.toggle("hidden",s!==id))

/* Envelope */
env.onclick=async()=>{
  env.textContent="üì®";
  await hmmmm.play();
  setTimeout(()=>show("s2"),1500)
}

/* Game (simple counter mock) */
let score=0
start.onclick=()=>{
  bgm.play()
  score=0
  scoreEl.textContent=0
}
game.onclick=()=>{
  score++
  scoreEl.textContent=score
  if(score>=11){
    bgm.volume=.25
    show("s3")
  }
}

/* Coin */
coin.onclick=()=>{
  coin.classList.add("inserted")
  setTimeout(()=>show("s4"),600)
}

/* Wheel */
const wheel=document.getElementById("wheel")
const ctx=wheel.getContext("2d")
const labels=[
 "Free massage for girlfriend",
 "You plan next date",
 "5 mins Onyx",
 "Tomyum ramen on you",
 "Wild card"
]
function drawWheel(){
 let a=0
 labels.forEach((t,i)=>{
  const slice=Math.PI*2/labels.length
  ctx.beginPath()
  ctx.moveTo(150,150)
  ctx.arc(150,150,140,a,a+slice)
  ctx.fillStyle=i%2?"#1d1d33":"#141423"
  ctx.fill()
  ctx.save()
  ctx.translate(150,150)
  ctx.rotate(a+slice/2)
  ctx.fillStyle="#fff"
  ctx.font="10px system-ui"
  ctx.textAlign="center"
  ctx.fillText(t.split(" ").slice(0,3).join(" "),90,0)
  ctx.restore()
  a+=slice
 })
}
drawWheel()

spin.onclick=()=>{
 spinSfx.play()
 setTimeout(()=>{
  yay.play()
  wildBtn.classList.remove("hidden")
 },2000)
}

wildBtn.onclick=()=>{
 happy.volume=.25
 happy.play()
 show("s5")
}

/* Book */
const pages=["photos/page1.jpg","photos/page2.jpg","photos/page3.jpg","photos/page4.jpg","photos/page5.jpg"]
const caps=[
 "Luck stat: 1",
 "Luck stat increasing to‚Ä¶2",
 "Luck stat increasing more‚Ä¶3",
 "Luck stat increasing morer‚Ä¶4",
 "Luck stat increasing morerest‚Ä¶5"
]
let idx=0
function renderBook(){
 book.innerHTML=`<img src="${pages[idx]}"><div class="caption">${caps[idx]}</div>`
}
renderBook()
book.onclick=()=>{if(idx<4){idx++;renderBook()}}

bonusBtn.onclick=()=>show("s6")

/* Bonus clicks */
let clicks=0
dcopBonus.onclick=()=>{
 clicks++
 bonusMsg.textContent=[
  "Better luck next time! Try again",
  "Ohhhhh mans‚Ä¶. Try again!"
 ][clicks-1]||""
 if(clicks>=3){
  show("s7")
  setTimeout(()=>{
    kissAudio.play()
    document.getElementById("kiss").style.opacity=1
    setTimeout(()=>{
      loveAudio.play()
      finalText.innerHTML="Happy Valentines mi baby! I‚Äôm the luckiest to have you.<br>With lots of love, Sandra"
      for(let i=0;i<30;i++){
        const p=document.createElement("span")
        p.style.left=Math.random()*100+"%"
        p.style.animationDelay=Math.random()*3+"s"
        petals.appendChild(p)
      }
    },800)
  },3000)
 }
}
</script>
</body>
</html>
